/*
 * jQuery Nivo Slider v2.5.2
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */(function(e){var x=function(r,y){var f=e.extend({},e.fn.nivoSlider.defaults,y),c={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:!1,paused:!1,stop:!1},g=e(r);g.data("nivo:vars",c);g.css("position","relative");g.addClass("nivoSlider");var k=g.children();k.each(function(){var d=e(this),h="";d.is("img")||(d.is("a")&&(d.addClass("nivo-imageLink"),h=d),d=d.find("img:first"));var b=d.width();0==b&&(b=d.attr("width"));var t=d.height();0==t&&(t=d.attr("height"));b>g.width()&&g.width(b);t>g.height()&&g.height(t);""!=h&&h.css("display","none");d.css("display","none");c.totalSlides++});0<f.startSlide&&(f.startSlide>=c.totalSlides&&(f.startSlide=c.totalSlides-1),c.currentSlide=f.startSlide);e(k[c.currentSlide]).is("img")?c.currentImage=e(k[c.currentSlide]):e(k[c.currentSlide]).find(".slide_img").length?(c.currentLink=e(k[c.currentSlide]).attr("href"),c.currentImage=e(k[c.currentSlide]).find(".slide_img")):c.currentImage=e(k[c.currentSlide]).find("img:first");e(k[c.currentSlide]).is("a")&&e(k[c.currentSlide]).css("display","block");g.css("background",'url("'+c.currentImage.attr("src")+'") no-repeat');g.append(e('\x3cdiv class\x3d"nivo-caption"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e').css({display:"none",opacity:f.captionOpacity}));var z=function(d){var h=e(".nivo-caption",g);if(""!=c.currentImage.attr("title")&&void 0!=c.currentImage.attr("title")){var b=c.currentImage.attr("title");"#"==b.substr(0,1)&&(b=e(b).html());"block"==h.css("display")?h.find("p").fadeOut(d.animSpeed,function(){e(this).html(b);e(this).fadeIn(d.animSpeed)}):h.find("p").html(b);h.fadeIn(d.animSpeed)}else h.fadeOut(d.animSpeed)};z(f);var l=0;!f.manualAdvance&&1<k.length&&(l=setInterval(function(){n(g,k,f,!1)},f.pauseTime));f.directionNav&&(g.append('\x3cdiv class\x3d"nivo-directionNav"\x3e\x3ca class\x3d"nivo-prevNav"\x3e'+f.prevText+'\x3c/a\x3e\x3ca class\x3d"nivo-nextNav"\x3e'+f.nextText+"\x3c/a\x3e\x3c/div\x3e"),f.directionNavHide&&(e(".nivo-directionNav",g).hide(),g.hover(function(){e(".nivo-directionNav",g).show()},function(){e(".nivo-directionNav",g).hide()})),e("a.nivo-prevNav",g).on("click",function(){if(c.running)return!1;clearInterval(l);l="";c.currentSlide-=2;n(g,k,f,"prev")}),e("a.nivo-nextNav",g).on("click",function(){if(c.running)return!1;clearInterval(l);l="";n(g,k,f,"next")}));if(f.controlNav){var w=e('\x3cdiv class\x3d"nivo-controlNav"\x3e\x3c/div\x3e');g.append(w);for(var m,p=0;p<k.length;p++)f.controlNavThumbs?(m=k.eq(p),m.is("img")||(m=m.find("img:first")),f.controlNavThumbsFromRel?w.append('\x3ca class\x3d"nivo-control" rel\x3d"'+p+'"\x3e\x3cimg src\x3d"'+m.attr("rel")+'" alt\x3d"" /\x3e\x3c/a\x3e'):(m='\x3ca class\x3d"nivo-control" rel\x3d"'+p+'"\x3e\x3cimg src\x3d"'+m.attr("src").replace(f.controlNavThumbsSearch,f.controlNavThumbsReplace)+'" alt\x3d"" /\x3e',f.beforeBindNavThumbs&&(m+=f.beforeBindNavThumbs.call(this,p)),m+="\x3c/a\x3e",w.append(m))):w.append('\x3ca class\x3d"nivo-control" rel\x3d"'+p+'"\x3e\x3c/a\x3e');e(".nivo-controlNav a:eq("+c.currentSlide+")",g).addClass("active");e(".nivo-controlNav a",g).on("click",function(){if(c.running||e(this).hasClass("active"))return!1;clearInterval(l);l="";g.css("background",'url("'+c.currentImage.attr("src")+'") no-repeat');c.currentSlide=e(this).attr("rel")-1;n(g,k,f,"control")})}f.keyboardNav&&e(window).keypress(function(d){if("37"==d.keyCode){if(c.running)return!1;clearInterval(l);l="";c.currentSlide-=2;n(g,k,f,"prev")}if("39"==d.keyCode){if(c.running)return!1;clearInterval(l);l="";n(g,k,f,"next")}});f.pauseOnHover&&g.hover(function(){c.paused=!0;clearInterval(l);l=""},function(){c.paused=!1;""!=l||f.manualAdvance||(l=setInterval(function(){n(g,k,f,!1)},f.pauseTime))});g.bind("nivo:animFinished",function(){c.running=!1;e(k).each(function(){e(this).is("a")&&e(this).css("display","none")});e(k[c.currentSlide]).is("a")&&e(k[c.currentSlide]).css("display","block");""!=l||c.paused||f.manualAdvance||(l=setInterval(function(){n(g,k,f,!1)},f.pauseTime));f.afterChange.call(this)});var v=function(d,h,b){for(var c=b.currentImage.hasClass("slide_img"),a=1920-e(window).width(),a=0<a?a/2:0,u=0;u<h.slices;u++){var f=Math.round(d.width()/h.slices),g=f+u*f-f,g=g+(c?a:0);u==h.slices-1?d.append(e('\x3cdiv class\x3d"nivo-slice"\x3e\x3c/div\x3e').css({left:f*u+"px",width:d.width()-f*u+"px",height:"0px",opacity:"0",background:'url("'+b.currentImage.attr("src")+'") no-repeat -'+g+"px 0%"})):d.append(e('\x3cdiv class\x3d"nivo-slice"\x3e\x3c/div\x3e').css({left:f*u+"px",width:f+"px",height:"0px",opacity:"0",background:'url("'+b.currentImage.attr("src")+'") no-repeat -'+g+"px 0%"}))}},A=function(d,h,b){for(var f=Math.round(d.width()/h.boxCols),a=Math.round(d.height()/h.boxRows),c=b.currentImage.hasClass("slide_img"),g=1920-e(window).width(),g=0<g?g/2:0,k=0;k<h.boxRows;k++)for(var l=0;l<h.boxCols;l++){var m=f+l*f-f,m=m+(c?g:0);l==h.boxCols-1?d.append(e('\x3cdiv class\x3d"nivo-box"\x3e\x3c/div\x3e').css({opacity:0,left:f*l+"px",top:a*k+"px",width:d.width()-f*l+"px",height:a+"px",background:'url("'+b.currentImage.attr("src")+'") no-repeat -'+m+"px -"+(a+k*a-a)+"px"})):d.append(e('\x3cdiv class\x3d"nivo-box"\x3e\x3c/div\x3e').css({opacity:0,left:f*l+"px",top:a*k+"px",width:f+"px",height:a+"px",background:'url("'+b.currentImage.attr("src")+'") no-repeat -'+m+"px -"+(a+k*a-a)+"px"}))}},n=function(d,h,b,f){var a=d.data("nivo:vars");a&&a.currentSlide==a.totalSlides-1&&b.lastSlide.call(this);if((!a||a.stop)&&!f)return!1;b.beforeChange.call(this);f?("prev"==f&&d.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat'),"next"==f&&d.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat')):d.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat');a.currentSlide++;a.currentSlide==a.totalSlides&&(a.currentSlide=0,b.slideshowEnd.call(this));0>a.currentSlide&&(a.currentSlide=a.totalSlides-1);e(h[a.currentSlide]).is("img")?a.currentImage=e(h[a.currentSlide]):e(h[a.currentSlide]).find(".slide_img").length?a.currentImage=e(h[a.currentSlide]).find(".slide_img"):a.currentImage=e(h[a.currentSlide]).find("img:first");b.controlNav&&(e(".nivo-controlNav a",d).removeClass("active"),e(".nivo-controlNav a:eq("+a.currentSlide+")",d).addClass("active"));z(b);e(".nivo-slice",d).remove();e(".nivo-box",d).remove();"random"==b.effect&&(h="sliceDownRight sliceDownLeft sliceUpRight sliceUpLeft sliceUpDown sliceUpDownLeft fold fade boxRandom boxRain boxRainReverse boxRainGrow boxRainGrowReverse".split(" "),a.randAnim=h[Math.floor(Math.random()*(h.length+1))],void 0==a.randAnim&&(a.randAnim="fade"));-1!=b.effect.indexOf(",")&&(h=b.effect.split(","),a.randAnim=h[Math.floor(Math.random()*h.length)],void 0==a.randAnim&&(a.randAnim="fade"));a.running=!0;if("sliceDown"==b.effect||"sliceDownRight"==b.effect||"sliceDownRight"==a.randAnim||"sliceDownLeft"==b.effect||"sliceDownLeft"==a.randAnim){v(d,b,a);var c=0,g=0;h=e(".nivo-slice",d);if("sliceDownLeft"==b.effect||"sliceDownLeft"==a.randAnim)h=e(".nivo-slice",d)._reverse();h.each(function(){var a=e(this);a.css({top:"0px"});g==b.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+c):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+c);c+=50;g++})}else if("sliceUp"==b.effect||"sliceUpRight"==b.effect||"sliceUpRight"==a.randAnim||"sliceUpLeft"==b.effect||"sliceUpLeft"==a.randAnim){v(d,b,a);g=c=0;h=e(".nivo-slice",d);if("sliceUpLeft"==b.effect||"sliceUpLeft"==a.randAnim)h=e(".nivo-slice",d)._reverse();h.each(function(){var a=e(this);a.css({bottom:"0px"});g==b.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+c):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+c);c+=50;g++})}else if("sliceUpDown"==b.effect||"sliceUpDownRight"==b.effect||"sliceUpDown"==a.randAnim||"sliceUpDownLeft"==b.effect||"sliceUpDownLeft"==a.randAnim){v(d,b,a);var k=g=c=0;h=e(".nivo-slice",d);if("sliceUpDownLeft"==b.effect||"sliceUpDownLeft"==a.randAnim)h=e(".nivo-slice",d)._reverse();h.each(function(){var a=e(this);0==g?(a.css("top","0px"),g++):(a.css("bottom","0px"),g=0);k==b.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+c):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+c);c+=50;k++})}else if("fold"==b.effect||"fold"==a.randAnim)v(d,b,a),g=c=0,e(".nivo-slice",d).each(function(){var a=e(this),f=a.width();a.css({top:"0px",height:"100%",width:"0px"});g==b.slices-1?setTimeout(function(){a.animate({width:f,opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+c):setTimeout(function(){a.animate({width:f,opacity:"1.0"},b.animSpeed)},100+c);c+=50;g++});else if("fade"==b.effect||"fade"==a.randAnim){v(d,b,a);var l=e(".nivo-slice:first",d);l.css({height:"100%",width:d.width()+"px"});l.animate({opacity:"1.0"},2*b.animSpeed,"",function(){d.trigger("nivo:animFinished")})}else if("slideInRight"==b.effect||"slideInRight"==a.randAnim)v(d,b,a),l=e(".nivo-slice:first",d),l.css({height:"100%",width:"0px",opacity:"1"}),l.animate({width:d.width()+"px"},2*b.animSpeed,"",function(){d.trigger("nivo:animFinished")});else if("slideInLeft"==b.effect||"slideInLeft"==a.randAnim)v(d,b,a),l=e(".nivo-slice:first",d),l.css({height:"100%",width:"0px",opacity:"1",left:"",right:"0px"}),l.animate({width:d.width()+"px"},2*b.animSpeed,"",function(){l.css({left:"0px",right:""});d.trigger("nivo:animFinished")});else if("boxRandom"==b.effect||"boxRandom"==a.randAnim){A(d,b,a);var m=b.boxCols*b.boxRows,c=g=0;h=x(e(".nivo-box",d));h.each(function(){var a=e(this);g==m-1?setTimeout(function(){a.animate({opacity:"1"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+c):setTimeout(function(){a.animate({opacity:"1"},b.animSpeed)},100+c);c+=20;g++})}else if("boxRain"==b.effect||"boxRain"==a.randAnim||"boxRainReverse"==b.effect||"boxRainReverse"==a.randAnim||"boxRainGrow"==b.effect||"boxRainGrow"==a.randAnim||"boxRainGrowReverse"==b.effect||"boxRainGrowReverse"==a.randAnim){A(d,b,a);var m=b.boxCols*b.boxRows,n=c=g=0,p=0,q=[];q[n]=[];h=e(".nivo-box",d);if("boxRainReverse"==b.effect||"boxRainReverse"==a.randAnim||"boxRainGrowReverse"==b.effect||"boxRainGrowReverse"==a.randAnim)h=e(".nivo-box",d)._reverse();h.each(function(){q[n][p]=e(this);p++;p==b.boxCols&&(n++,p=0,q[n]=[])});for(h=0;h<2*b.boxCols;h++){f=h;for(var r=0;r<b.boxRows;r++)0<=f&&f<b.boxCols&&(function(c,f,g,h,l){var k=e(q[c][f]),m=k.width(),t=k.height();"boxRainGrow"!=b.effect&&"boxRainGrow"!=a.randAnim&&"boxRainGrowReverse"!=b.effect&&"boxRainGrowReverse"!=a.randAnim||k.width(0).height(0);h==l-1?setTimeout(function(){k.animate({opacity:"1",width:m,height:t},b.animSpeed/1.3,"",function(){d.trigger("nivo:animFinished")})},100+g):setTimeout(function(){k.animate({opacity:"1",width:m,height:t},b.animSpeed/1.3)},100+g)}(r,f,c,g,m),g++),f--;c+=100}}},x=function(d){for(var c,b,e=d.length;e;c=parseInt(Math.random()*e),b=d[--e],d[e]=d[c],d[c]=b);return d},B=function(d){this.console&&"undefined"!=typeof console.log&&console.log(d)},q=e(r);this.stop=function(){q.data("nivo:vars").stop||(q.data("nivo:vars").stop=!0,B("Stop Slider"))};this.start=function(){q.data("nivo:vars").stop&&(q.data("nivo:vars").stop=!1,B("Start Slider"))};f.fnDirectionNav&&(q.addClass("fn_dir_nav").append('\x3cdiv class\x3d"fdnbtn fdn_prev"\x3e\x3ca\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"fdnbtn fdn_next"\x3e\x3ca\x3e\x3c/a\x3e\x3c/div\x3e'),q.find(".fdnbtn a").on("click",function(){var d=e(this),c=q.find(".nivo-controlNav").find("\x3e.nivo-control"),b=c.length,f=c.filter(".active").index();d.parent().hasClass("fdn_prev")?--f:f+=1;-1==f?f=b-1:f==b&&(f=0);c.eq(f).click()}));f.afterLoad.call(this);return this};e.fn.nivoSlider=function(r){return this.each(function(y,f){var c=e(this);if(c.data("nivoslider"))return c.data("nivoslider");var g=new x(this,r);c.data("nivoslider",g)})};e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3E3,startSlide:0,directionNav:!0,directionNavHide:!0,controlNav:!0,controlNavThumbs:!1,controlNavThumbsFromRel:!1,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:!0,pauseOnHover:!0,manualAdvance:!1,captionOpacity:.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};e.fn._reverse=[].reverse})(jQuery);